# [RU] Постановка задачи

За единицу времени (**этап**, длительность которого примем за **неделю**) сахарный завод перерабатывает фиксированное количество сырья массы $M$ (**партию**). Величина $M$ определяется производственными мощностями завода и известна, но в итоге требоваться нигде не будет. Имеется сырье (сахарная свекла разных сортов), и в каждую единицу времени перерабатывается сырье только одного сорта - одна партия.

Пусть $n$ - количество партий свеклы, которые завод может переработать за некоторый сезон. 

Предположим, что к началу сезона переработки всё сырье доступно для использования. Занумеруем партии сырья, некоторым образом, от $1$ до $n$. Обозначим $c_{ij}$ - **долю полезного ингредиента** в $i$-й партии сырья в начале $j$-го этапа переработки ($\forall i, j \in \{1, 2, ..., n\}$; для сахарной свеклы полезный ингредиент - это сахар).

Параметры $c_{ij}$ определяются через **начальную долю полезного ингредиента** $c_{i1} = a_i \in [a_{min},a_{max}]$ и **коэффициенты деградации** $b_{ij-1}=\frac{c_{ij}}{c_{ij-1}}, \forall j \in \{2, 3, ..., n\}$.

Соответствующие формулы для $c_{ij}$ имеют следующий вид:

$c_{i1}=a_i, c_{ij}=a_ib_{i1}...b_{ij-1}, \forall i \in \{1, 2, ..., n\}, \forall j \in \{2, 3, ..., n\}$

Параметры $c_{ij}$ составляют матрицу $С$, которую будем называть **матрицей состояний**. 

Если в течение хранения доля сахара постоянно уменьшается (свекла деградирует), то $b_{ij} \in [\beta_1, \beta_2] \subset (0, 1)$.

Вообще говоря, конкретные параметры $a_i$ и $b_{ij}$ неизвестны. Значения $a_i$ равномерно распределены на отрезке: $a_i \in [\alpha_{min}, \alpha_{max}] \subset (0, 1)$. Значения $b_{ij}$ могут быть распределены на отрезке $b_{ij} \in [\beta_1, \beta_2] \subset (0, 1)$ $(\subset (1, \beta_{max}]$, про $\beta_{max}$ будет сказано в разделе с дозариванием $)$ либо равномерно, либо концентрировано (способ распределения задаётся). В случае концентрированного распределения для каждого сорта $i$ выбирается некоторая положительно константа $\delta_i \le \frac{\beta_2-\beta_1}{4}$ ($\delta_i \le \frac{\beta_{max}-1}{4}$), затем случайно создаётся подотрезок исходного отрезка заданной длины, на котором распределение уже равномерное.

## Дополнительные условия
### Процесс дозаривания
В течение первых $v$ этапов переработки может быть такое, что доля полезного ингредиента $c_{ij}$ возрастает. На этих этапах $b_{ij} \in (1, \beta_{max}]$.

Следует заметить, что доля $c_{ij}$ в таком процессе не должна превысить $1$, а $\beta_{max}$ не стоит выбирать более $\frac{n-1}{n-2}$.
### Влияние неорганических веществ
При переработке партий свеклы возможны потери сахара, из-за чего в качестве матрицы состояний следует рассматривать некоторую $\tilde{S} = C - \tilde{L}$, где элемент $l_{ij}$ соответствует потерям при переработке $i$-той партии на $j$-том этапе (если влияния нет, то матрица $\tilde{L}$ будет нулевой).

Значение $l_{ij}$ (в %) может быть вычислено по следующей формуле:

$l_{ij} = 1.1 + 0.1541 \times (K_i + Na_i) + 0.2159 \times N_i + 0.9989 \times I_{ij} + 0.1967$, где соответствующие значения:
- $K_i \in [4.8; 7.05]$;
- $Na_i \in [0.21;0.82]$;
- $N_i \in [1.58;2.8]$;
- $I_{ij} = I_{i0} \times (1.029)^{7j - 7}$, где $j$ - номер этапа переработки (нумерация с $1$);
- $I_{i0} \in [0.62;0.64]$.

Данные параметры также неизвестны и могут быть равномерно выбраны с соответствующих отрезков.

---

Опишем последовательность переработки партий сырья перестановкой $\sigma$ из $n$ чисел от $1$ до $n$, где $\sigma(i)$ означает, что партия под этим номером была переработана во время $i$-го этапа.

Тогда общая доля полученного полезного ингредиента будет равна $S(\sigma) = \tilde{s} _{\sigma(1)1} + ... + \tilde{s} _{\sigma(n)n}$, а масса конечного продукта $S = S(\sigma) \times M \times d$, где $d$ - число дней в этапе (в данном случае $7$).

Задача оптимизации состоит в нахождении такой перестановки, которая максимизирует итоговую полученную массу продукта.

Однако, её сложность заключается в том, что на $i$-ом этапе известны лишь первые $i$ столбцов матрицы состояний, а также предыдущие выборы для переработки.

Разные стратегии выбора могут опираться только на известные им данные и быть эффективными/плохими на различных входных данных.

Требуется реализовать систему поддержки принятия решений, которая по типу входных данных (более подробное описание в **техническом задании**) рекомендует некоторую стратегию, после проведения серии экспериментов.

Требуемые стратегии:
- Жадная (описание в `textbook.pdf`);
- Бережливая (описание в `textbook.pdf`);
- Жадно-бережливая (описание в `textbook.pdf`);
- Бережливо-жадная (описание в `textbook.pdf`);
- Медианная - на каждом этапе выбирается медианный элемент в столбце среди доступных.

Серия экспериментов состоит из отдельных экспериментов, результаты которых затем обрабатываются.

В ходе каждого эксперимента генерируется матрица состояний, соответствующая описанию во входных данных, затем на ней запускается каждый из перечисленных выше алгоритмов, а также с помощью некоторого точного алгоритма (например, Венгерского) определяется наилучший результат. На основании этих данных для каждого алгоритма определяются относительные потери в % по формуле $loss = \frac{S(\sigma_{opt}) - S(\sigma)}{S(\sigma_{opt}} \times 100\%$.

После проведения серии экспериментов значения, полученные каждым алгоритмом, усредняются, и предлагается к использованию алгоритм с наименьшими потерями. 


---

# Техническое задание
Требуется реализовать программу, обладающую графическим интерфейсом, которая:
1) Принимает входные данные и предлагает рекомендованные значения для входных данных (некоторые значения по умолчанию), также проверяет данные на корректность:
	- $T$ - **натуральное число** - число виртуальных экспериментов ($50$);
	- $n$ - **натуральное число** - число этапов переработки ($15$) - каждый этап переработке соответствует недели;
	- $\alpha_{min}, \alpha_{max}$ - **вещественные числа с отрезка [0.12; 0.22]** - верхняя и нижняя граница начальной доли полезного ингредиента ($0.12$ и $0.22$);
	- $\beta_1, \beta_2$ - **вещественные числа с полуинтервала (0.85; 1)** - верхняя и нижняя граница коэффициентов деградации ($0.86$ и $0.99$);
	- *Флаг распределения коэффициентов деградации* - **равномерно/концентрировано** (равномерно);
	- *Флаг наличия дозаривания* - **присутствует/отсутствует** (отсутствует);
	- *Флаг влияния неорганических веществ* - **влияют/не влияют** (не влияют).

	Если учитывается процесс дозаривания:
	- $v$ - **натуральное число, не превышающее** $n$ - число этапов, в течение которых доля полезного ингредиента возрастает ($n / 2$);
	- $\beta_{max}$ - **вещественное число с полуинтервала (1; 1.15)** - верхняя граница коэффициента деградации при дозаривании ($min\{\frac{n-1}{n-2}, 1.15\}$).
2) На основании принятых данных проводит серию экспериментов
3) По итогам серии экспериментов вычисляются cредние относительные потери сахара при использовании каждой стратегии (%)
4) После этого строятся графики с визуальным отображением потерь, также рекомендуется конкретный алгоритм